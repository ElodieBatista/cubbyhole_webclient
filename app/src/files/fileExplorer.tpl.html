<div class="primary" id="file-explorer-container">

  <div class="panel-left-content col-md-3" id="tree-view"></div>

  <div id="file-explorer-progress-bar"></div>

  <div class="col-md-9" id="grid-view" ng-file-drop="onFileSelect(null, $files)" ng-file-drag-over-class="upload-container-hover">

    <ul class="row action-bar">
      <li class="action-bar-item" data-toggle="modal" ng-click="feOpenModalNewFolder()">
        <img class="action-bar-icon" src="/styles/icons/icon_folder_add.svg" />
        <span>Create Folder</span>
      </li>
      <li class="action-bar-item" ng-click="feOpenModalNewFiles()">
        <img class="action-bar-icon" src="/styles/icons/icon_file_add.svg" />
        <span>Add Files</span>
      </li>
      <li class="action-bar-item" ng-show="itemActive" ng-click="feOpenModalRenameItem(itemActive)">
        <img class="action-bar-icon" src="/styles/icons/icon_edit.svg" />
        <span>Rename</span>
      </li>
      <li class="action-bar-item" ng-show="itemActive" ng-click="feOpenModalDeleteItem(itemActive)">
        <img class="action-bar-icon" src="/styles/icons/icon_delete.svg" />
        <span>Delete</span>
      </li>
      <li class="action-bar-item" ng-show="itemActive && itemActive.type === 'file' || itemActive.children.length > 0" ng-click="feDownloadItem()">
        <img class="action-bar-icon" src="/styles/icons/icon_download.svg" />
        <span>Download</span>
      </li>
      <li class="action-bar-item" ng-show="itemActive && itemActive.type === 'folder'" ng-click="feSelectNode(itemActive)">
        <img class="action-bar-icon" src="/styles/icons/icon_open.svg" />
        <span>Open</span>
      </li>
    </ul>

    <div class="row grid-view-table-container">
      <table class="col-md-12 grid-view-table">
        <thead>
          <tr class="grid-view-table-header">
            <th>Name</th>
            <th>Type</th>
            <th>Size</th>
            <th>Modified</th>
          </tr>
        </thead>
        <tbody>
          <tr class="grid-view-table-tr" ng-class="{true:'itemActive',false:''}[itemActive.name == file.name]" ng-repeat="file in files" ng-click="toggleItem(file)">
            <td class="grid-view-table-td-first">
              <img class="grid-view-table-icon" ng-src="/styles/icons/icon_{{file.type}}.svg" />

              <span class="grid-view-table-filename" ng-if="file.type === 'folder'" ng-click="feSelectNode(file)">{{file.name}}</span>
              <span class="grid-view-table-filename" ng-if="file.type === 'file'" ng-click="feAskDownloadConfirm(file); $event.stopPropagation();">{{file.name}}</span>
            </td>
            <td>
              <span ng-if="file.type === 'folder'" ng-bind="file.type"></span>
              <span ng-if="file.type === 'file'" ng-bind="file.meta.type"></span>
            </td>
            <td>
              <span ng-if="file.type === 'folder'">-</span>
              <span ng-if="file.type === 'file'" ng-bind="file.meta.size | size"></span>
            </td>
            <td>{{file.lastModified | date}}</td>
          </tr>
        </tbody>
      </table>

      <p class="col-md-12" id="grid-view-msg" ng-show="files.length === 0">
        This folder is empty. <span class="grid-view-highlight">Drag and drop</span> some folders and files here!
      </p>

    </div>

    <div class="upload-progress-container" ng-show="uploading">
      <button class="upload-btn" ng-click="upload.abort()">Cancel Upload</button>
    </div>

  </div>

  <form id="file-explorer-form-download" method="GET" action="http://localhost:3000/item/{{itemActiveId}}/download/{{token}}">
  </form>
</div>

<modal class="primary" modal-opts="modalOpts"></modal>